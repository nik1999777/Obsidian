![[Untitled 81.png|Untitled 81.png]]

### Как работают веб-браузеры?

- **User Interface (Пользовательский интерфейс):**
    
    Это пользовательский интерфейс для браузера. Он включает в себя адресную строку, кнопку «Назад», параметры закладок, кнопку «Обновить» и т. д.
    
    Пользовательский интерфейс браузера не указан ни в какой официальной спецификации, а основан на практиках, сформированных за десятилетия опыта (и браузеров, копирующих друг друга).
    
    В результате интерфейсы всех браузеров очень похожи друг на друга.
    
- **The Browser Engine (Браузерный движок):**
    
    Механизм браузера упорядочивает действия между пользовательским интерфейсом браузера и механизмом рендеринга браузера.
    
    Когда вы вводите новый веб-сайт и нажимаете клавишу ввода, пользовательский интерфейс браузера сообщит об этом механизму браузера, который затем свяжется с механизмом рендеринга.
    
- **The Rendering Engine (Механизм рендеринга):**
    
    Механизм рендеринга отвечает за отображение запрошенного контента.
    
    Механизм рендеринга запустится, получив содержимое запрошенного документа с сетевого уровня.
    
    Он принимает код HTML и анализирует его для создания дерева DOM (объектная модель документа).
    
    Затем механизм рендеринга будет анализировать CSS для создания CSSOM (объектной модели CSS). Это похоже на DOM, но для CSS, а не для HTML.
    
    Пока выполняется синтаксический анализ CSS и создается CSSOM, браузер загружает другие активы через сетевой уровень, например файлы JavaScript.
    
    Механизм рендеринга связывается с механизмом JavaScript для выполнения кода JavaScript и управления DOM и CSSOM.
    
    Затем механизм рендеринга берет DOM и CSSOM и объединяет их для создания дерева рендеринга.
    
    Затем механизм рендеринга использует серверную часть пользовательского интерфейса для размещения веб-сайта на экране и, наконец, рисования пикселей на экране.
    
    Весь процесс, который проходит механизм рендеринга, называется критическим путем рендеринга.
    
    **Примеры механизма рендеринга включают:**
    
    - Safari — механизм рендеринга WebKit
    - Chrome — Blink Rendering Engine (Blink — это форк WebKit)
    - FireFox — движок рендеринга Gecko
- **Networking Layer (Сетевой уровень):**
    
    Сетевой уровень отвечает за выполнение сетевых вызовов для получения ресурсов.
    
    Он устанавливает правильные ограничения на подключение, форматирует запросы, работает с прокси, кэширует и многое другое.
    
- **JavaScript Engine (JavaScript-движок):**
    
    Механизм JavaScript используется для анализа и выполнения кода JavaScript в DOM или CSSOM. Код JavaScript предоставляется веб-сервером или может быть предоставлен веб-браузером (расширения браузера или функции браузера, такие как автоматическая блокировка рекламы).
    
    Ранние браузеры использовали интерпретаторы JavaScript, но современные движки JavaScript используют JIT-компиляцию для повышения производительности.
    
    **Примеры движка JavaScript включают**
    
    - Chrome — JavaScript-движок V8
    - Safari — JavaScriptCore
    - FireFox - SpiderMonkey
- **UI Backend (Бэкэнд пользовательского интерфейса):**
    
    Этот слой отвечает за отрисовку основных виджетов, таких как поля выбора или ввода и окна. Под ним используются методы пользовательского интерфейса операционной системы.
    
    Механизм рендеринга использует внутренний слой пользовательского интерфейса на этапах макета и рисования для отображения веб-страницы в браузере.
    
- **Data Storage (Хранилище данных):**
    
    Браузер должен сохранять данные локально (файлы cookie, кеш и т. д.), поэтому компонент Data Storage обрабатывает эту часть.
    
    Современные браузеры также поддерживают такие механизмы хранения, как localStorage, IndexedDB и FileSystem. Это отличная статья обо всех вариантах хранения на стороне браузера.
    

Мы рассмотрели поверхностный уровень **архитектура браузера**.

  

- **Webkit render engine architecture (Архитектура движка рендера webkit)**
    
    ![[Untitled 1 27.png|Untitled 1 27.png]]
    
    **WebKit** - это современный движок рендеринга, который используется в браузерах и других приложениях для отображения веб-страниц и интерфейсов. Разработанный компанией Apple, WebKit является свободным и открытым проектом и находится под активной разработкой сообщества.
    
    Архитектура WebKit состоит из нескольких компонентов:
    
    1. WebCore: основной компонент WebKit, отвечающий за рендеринг веб-страниц. WebCore разработан на C++ и представляет собой своего рода движок HTML и CSS. Он включает в себя реализации стандартных тегов и свойств CSS, а также поддержку JavaScript и других технологий.
    2. JavaScriptCore: компонент WebKit, который обеспечивает поддержку JavaScript. JavaScriptCore является движком JavaScript, который может быть использован как в WebKit, так и в других проектах. JavaScriptCore разработан на C++ и может быть использован в других приложениях в качестве отдельной библиотеки.
    3. WebKit2: это новая версия WebKit, которая была представлена в 2010 году. Она была переписана с нуля и включает в себя новые функции, такие как процессы с отдельными вкладками и поддержка современных технологий, таких как WebGL и HTML5. WebKit2 также предоставляет более безопасную архитектуру, которая разделяет процессы рендеринга и браузера.
    4. WebKitGTK+: это версия WebKit для среды рабочего стола GNOME, которая разработана на языке программирования C. WebKitGTK+ обеспечивает поддержку HTML, CSS и JavaScript, а также поддерживает плагины, такие как Flash.
    5. WebKitEFL: это версия WebKit для платформы Enlightenment Foundation Libraries (EFL), которая предоставляет API для создания интерфейсов на различных устройствах. WebKitEFL предоставляет поддержку HTML, CSS и JavaScript, а также поддерживает мультитач и аппаратное ускорение.
    
    В целом, архитектура WebKit представляет собой гибкую и модульную систему, которая может быть использована для создания мощных и современных браузеров и других приложений.
    
    ---
    
    **WebKit** работает как движок рендеринга, который отображает веб-страницы в браузерах и других приложениях. Для этого WebKit выполняет следующие шаги:
    
    1. Обработка HTML: WebKit получает HTML-код веб-страницы и начинает его обработку. Код разбивается на теги и элементы, которые затем обрабатываются и преобразуются в объекты, представляющие веб-страницу.
    2. Обработка CSS: WebKit обрабатывает CSS-стили, которые применяются к HTML-элементам. CSS-стили определяют, как элементы веб-страницы будут отображаться, например, их цвет, размер, расположение и т.д.
    3. Обработка JavaScript: WebKit обрабатывает JavaScript-код, который может изменять внешний вид и поведение веб-страницы в реальном времени. JavaScript может использоваться для создания динамических элементов на странице, таких как анимации, меню и других интерактивных элементов.
    4. Рендеринг страницы: WebKit использует данные HTML, CSS и JavaScript для создания отображаемой веб-страницы. Это включает в себя создание макета страницы, расположение элементов на странице, выбор шрифтов и цветов, а также отображение изображений и других медиа-элементов.
    5. Обработка событий: WebKit обрабатывает события, такие как щелчки мыши, нажатия клавиш и другие действия пользователя. Эти события могут приводить к изменению веб-страницы в реальном времени, например, к изменению цвета кнопки или отображению дополнительной информации.
    6. Кэширование: WebKit может использовать кэширование для хранения ранее загруженных элементов страницы, таких как изображения и стили. Это позволяет ускорить загрузку страницы при повторном ее посещении.
    7. Безопасность: WebKit обеспечивает безопасность веб-просмотра, блокируя нежелательный контент, такой как вредоносный код и рекламу. WebKit также обеспечивает защиту конфиденциальности пользователей, например, блокируя отслеживание и предотвращая утечки данных.
    
    Таким образом, WebKit представляет собой сложный и мощный движок рендеринга, который обеспечивает высокое качество отображения веб-страниц и защиту пользователей. Он используется во многих браузерах.
    

### **Chrome browser architecture schema (Архитектура браузера chrome)**

![[Untitled 2 19.png|Untitled 2 19.png]]

  

### Firefox **browser architecture schema (Архитектура браузера** Firefox**)**

![[Untitled 3 9.png|Untitled 3 9.png]]