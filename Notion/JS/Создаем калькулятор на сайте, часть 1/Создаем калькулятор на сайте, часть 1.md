![[Untitled 142.png|Untitled 142.png]]

Мы получаем элемент со страницы с **классом** **calculating__result** и внутри него **span**.

В наших расчетах будет 5 различных **переменных**: **sex**, **height**, **weight**, **age**, **ratio** и создадим их через **let**, потому что значение их будет меняться.

Далее создадим **функцию** **calcTotal()**. Внутри прописываем **условие**, которое говорит, что если хотя бы одна из наших **переменных** будет в **логическом контексте false**, то эту **функцию** мы больше не будем воспроизводить. Если **условие** выполнится, то в результат выведется просто пробел. И чтобы функцию сразу же прервать пропишем **return**. Если **условие** выполнится дальше она работать не будет. Это **условие** нужно для того, чтобы, пользователь ввел и отметил все данные.

Дале напишем нашу формулу **расчета** , причем в **условии**, потому что у нас их две, как для мужчины, так и для женщины. То есть если пользователь выбрал женщину, то **условие** выполняется и производится расчет по формуле для женщины, если нет, то выполняется **else** - там формула для мужчины.

```JavaScript
// Calculator

    const result = document.querySelector('.calculating__result span');
    let sex = 'female',
        height, weight, age,
        ratio = 1.375;

    function calcTotal() {
        if (!sex || !height || !weight || !age || !ratio) {
            result.textContent = '____'; // Можете придумать что угодно
            return;
        }
        if (sex === 'female') {
            result.textContent = Math.round((447.6 + (9.2 * weight) + (3.1 * height) - (4.3 * age)) * ratio);
        } else {
            result.textContent = Math.round((88.36 + (13.4 * weight) + (4.8 * height) - (5.7 * age)) * ratio);
        }
    }

    calcTotal();
```

Далее создаем **функцию** по получению статической информации **getStaticInformation()**, в которой будет 2 **аргумента**.

Получаем все **div** внутри родителя, прописав: **(`${parentSelector} div`)**

C помощью **forEach()** перебираем все **elem** внутри **переменной** **elements**. Навешиваем **обработчик события** на **elem** и внутри прописываем **условие**, в котором говорится, если у блока, на который мы нажали есть **атрибут** **data-radio**, то мы изменяем **переменную** **ratio**, если нет, то мы просто берем **уникальный идентификатор** и записываем в пол **перемнную** **sex**.

Далее мы перебираем все элементы, удаляем **класс активности** у всех элементов **remove(activeClass)** и потом добавляем только тому **add(activeClass)**, на который нажали.

И теперь мы вызываем эту функцию 2 раза с различными элементами:

В вызове **функции** первый раз, первым **аргументом** будет **родитель** блока с полом и там мы берем **id**, почему не **класс**, потому что он повторяется у других блоков и далее класс **активности**.

```JavaScript
getStaticInformation('\#gender div', 'calculating__choose-item_active')
```

В вызове второй **функции** мы берем **родителя** и **класс активности** у блока с выбором активности.

```JavaScript
function getStaticInformation(parentSelector, activeClass) {
        const elements = document.querySelectorAll(`${parentSelector} div`);

        elements.forEach(elem => {
            elem.addEventListener('click', (e) => {
                if (e.target.getAttribute('data-ratio')) {
                    ratio = +e.target.getAttribute('data-ratio');
                } else {
                    sex = e.target.getAttribute('id');
                }
    
                elements.forEach(elem => {
                    elem.classList.remove(activeClass);
                });
    
                e.target.classList.add(activeClass);
    
                calcTotal();
            });
        });
    }

    getStaticInformation('\#gender', 'calculating__choose-item_active');
    getStaticInformation('.calculating__choose_big', 'calculating__choose-item_active');
```

Далее создаем **функцию** **getDynamicInformation**, которая будет работать с **input**. Она будет принимать только один **аргумент**, **селектор** **input**, который нас интересует.

Сначала мы получаем все **input** со страницы. Далее навешиваем **обработчик события input**. И внутри мы используем конструкцию **switch**. В которой ссылаемся на **id** и проверяем на соответствие **height**, **width**, **age**. Если **id** соответсвует, то мы берем **переменную** и записываем то значение, которое ввел пользователь.

И далее вызываем функцию с 3 разными селекторами:

```JavaScript
getDynamicInformation('\#height');
getDynamicInformation('\#weight');
getDynamicInformation('\#age');
```

  

```JavaScript
function getDynamicInformation(selector) {
        const input = document.querySelector(selector);

        input.addEventListener('input', () => {
            switch(input.getAttribute('id')) {
                case "height":
                    height = +input.value;
                    break;
                case "weight":
                    weight = +input.value;
                    break;
                case "age":
                    age = +input.value;
                    break;
            }

            calcTotal();
        });
    }

    getDynamicInformation('\#height');
    getDynamicInformation('\#weight');
    getDynamicInformation('\#age');
```

```HTML
<div class="calculating">
    <div class="container">
        <h2 class="title">Рассчитаем вашу потребность в калориях?
        </h2>
        <div class="calculating__field">
            <div class="calculating__subtitle">
                Ваш пол
            </div>
            <div class="calculating__choose" id="gender">
                <div id="female" class="calculating__choose-item calculating__choose-item_active">Женщина</div>
                <div id="male" class="calculating__choose-item">Мужчина</div>
            </div>

            <div class="calculating__subtitle">
                Ваша конституция
            </div>
            <div class="calculating__choose calculating__choose_medium">
                <input type="text" id="height" placeholder="Введите рост" class="calculating__choose-item">
                <input type="text" id="weight" placeholder="Введите вес"  class="calculating__choose-item">
                <input type="text" id="age" placeholder="Введите возраст" class="calculating__choose-item">
            </div>

            <div class="calculating__subtitle">
                Выберите вашу физическая активность
            </div>
            <div class="calculating__choose calculating__choose_big">
                <div data-ratio="1.2" id="low" class="calculating__choose-item">Низкая активность </div>
                <div data-ratio="1.375" id="small"  class="calculating__choose-item calculating__choose-item_active">Невысокая активность</div>
                <div data-ratio="1.55" id="medium" class="calculating__choose-item">Умеренная активность</div>
                <div data-ratio="1.725" id="high" class="calculating__choose-item">Высокая активность</div>
            </div>

            <div class="calculating__divider"></div>

            <div class="calculating__total">
                <div class="calculating__subtitle">
                    Ваша суточная норма калорий:
                </div>
                <div class="calculating__result">
                    <span>2700</span> ккал
                </div>
            </div>
        </div>
    </div>
</div>
```