Чтобы переместить код влево, вправо в маке нужно зажать command+ []

![[Untitled 124.png|Untitled 124.png]]

В данном коде мы с помощью **метода** **seTimeout()** делаем так, чтобы **функция** **openModal()** выполнилась после истечения 5000 милисекунда нахождения на сайте( то есть модальное окно появилось у пользователя после истечения 5 секунд.

Также еще внутри функции **openModal()** прописываем **метод** **clearInterval(modalTimerId)** и это означает, что если вдруг пользователь сам открыл модальное окно, то мы с вами очистим интервал времени.

И далее мы создаем **функцию showModalByScroll()**, которая отслеживает долистал ли  пользователь страницу до конца, и если да, то вызывает **функцию openModal()**.

Здесь мы используем **событие** **scroll**.

**Условие** которое задается в этой **функции** использует 3 **свойства**:

**pageYOffset** - это свойство отслеживает сколько пикселей сверху у нас отлистал пользователь по оси Y.

**scrollHeight** -  с помощью этого **свойства** мы получаем полную высоту какого-то элемента с учетом прокрутки, которая была сверху.

И из этих **свойств** мы создаем небольшое математическое выражение: берем **свойство**, которое отвечает за прокрутку сверху **pageYOffse** + **свойство**, которое отображает высоту без прокрутки **clientHeight** и сравниваем со с **scrollHeight**(то есть с полной прокруткой и с полным контентом). И если двое этих **свойств** совпадают со **свойством** **scrollHeight**, то значит у нас пользователь долистал до конца.

И внутри условия прописываем: **window.removeEventListener('scroll', showModalByScroll)** для того, чтобы удалить **обработчик**. Это делается для того, чтобы модальное окно появлялось только один раз при полной прокрутке сайта:

```JavaScript
function openModal() {
    modal.classList.add('show');
    modal.classList.remove('hide');
    document.body.style.overflow = 'hidden';
    clearInterval(modalTimerId);
}

modalTrigger.forEach(btn => {
    btn.addEventListener('click', openModal);
});
```

```JavaScript
const modalTimerId = setTimeout(openModal, 5000);

function showModalByScroll() {
    if(window.pageYOffset + document.documentElement.clientHeight >= document.documentElement.scrollHeight) {
        openModal();
        window.removeEventListener('scroll', showModalByScroll);
    }
}

window.addEventListener('scroll', showModalByScroll);
```