[https://learn.javascript.ru/js-animation](https://learn.javascript.ru/js-animation) - JavaScript анимации

  

**setTimeout**

Для того чтобы запустить нашу **функцию** через определенный промежуток времени существует конструкция **setTimeout()**. И вызывается эта **функция** через промежуток времени, который мы задаем вторым **аргументом**(в данном примере 2000 ms), время в таких конструкциях устанавливается в ms.

```JavaScript
const timeId = setTimeout(function(){
    console.log('Hello');
}, 2000);
```

Помимо этого данная конструкция также может принимать **аргументы**, которые будут уже **аргументами** для **функции** внутри. Сюда мы передаем **text** **function(text)**, в консоль будет выводиться текст, который передается **функцией**. И третьем **аргументом** передаем **'Hello'**, который по синтаксису перейдет в **функцию**, которая запускается внутри **setTimeout()**.

```JavaScript
const timeId = setTimeout(function(text){
    console.log(text);
}, 2000, 'Hello');
```

И также мы с вами можем передавать уже готовую **функцию**. И в **setTimeout()** первым **аргументом** вместо того, чтобы описывать, задавать как-то **функцию**, мы передаем уже готовую **функцию** **logger()**, заметим что мы ее не вызываем, прописываем без скобок. И после того как истечет 2000ms вызовется эта **функция**.

```JavaScript
const timeId = setTimeout(logger, 2000);

function logger () {
    console.log('text');
}
```

Иногда нам нужно сбрасывать **setTimeout()**. Делается это с помощью команды **clearInterval()**, а во внутрь передаем тот **setTimeout()**, который нам нужно остановить, сбросить.

```JavaScript
const timeId = setTimeout(logger, 2000);

clearInterval(timeId);

function logger () {
    console.log('text');
}
```

  

**setInterval**

Если мы хотим, чтобы наш скрипт выполнялся через определенное кол-во времени, а не просто один раз выполнился, то для этого существует **функция setInterval()**. Синтаксис у нее точно такой же и принимает **аргументы** она точно такие же , и отменяется точно также.

В данном коде при нажатии на кнопку, через каждые 500ms, строго 4 раза будет выводится в консоль **text**.

```JavaScript
const btn = document.querySelector('.btn');
let timerId,
    i = 0;

btn.addEventListener('click', () => {
    timerId = setInterval(logger, 500);
});

function logger () {
    if (i === 3) {
        clearInterval(timerId);
    }
    console.log('text');
    i++;
}
```

![[Untitled 120.png|Untitled 120.png]]

![[Untitled 1 56.png|Untitled 1 56.png]]

**Рекурсия** - эта когда **функция** сама себя внутри вызывает, это один из приемов программирования.

На собеседовании могут спросить вопрос:

Чем **рекурсивный** **setTimeout()** лучше чем **setInterval()**?

А тем, что в **setInterval()** существует проблема: когда таймер с интервалом работает, он не учитывает, как долго будет работать **функция** внутри него.

Ему все равно сколько будет выполняться **функция logger()**. В примере выше мы поставили интервал в 500ms, но если **функция** будет выполнять какие то сложные задачи, вдруг наша **функция logger()** будет выполняться 3 сек или более. Как же будет вести себя **setInterval()**? А работать это будет так, что он не будет ждать 500ms, он возьмет и сразу же будет выполнять следующий **logger()**. Он будет думать, что 500ms уже прошли.

И для решении данной проблемы используют **рекурсивный setTimeout()**.

Работает это точно также как и **setInterval()**, но разница лишь в том, что наш код всегда будет ждать строго отведенное ему время. Такой проблемы, как в **setInterval()** уже не будет.

```JavaScript
let id = setTimeout(function log() {
    console.log('Hello');
    id = setTimeout(log, 500);
}, 500);
```

В данном коде реализована анимация синего квадратика при нажатии на желтую кнопку.

```JavaScript
const btn = document.querySelector('.btn');

function myAnimation() {
    const elem = document.querySelector('.box');
    let pos = 0;

    const id = setInterval(frame, 10);
    function frame() {
        if (pos === 300) {
            clearInterval(id);
        } else {
            pos++;
            elem.style.top = pos + "px";
            elem.style.left = pos + "px";
        }
    }
}

btn.addEventListener('click', myAnimation);
```

![[Untitled 2 43.png|Untitled 2 43.png]]

![[Untitled 3 31.png|Untitled 3 31.png]]

![[Untitled 4 22.png|Untitled 4 22.png]]

```HTML
<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Java Script</title>
    <link rel="stylesheet" href="css/style.css">
  </head>
  <body>
    <button class="btn">Animation</button>
    <div class="wrapper">
        <div class="box"></div>
    </div>
  <script src="js/script.js"></script>
  </body>
</html>
```

```CSS
.box {
  position: absolute;
  width: 100px;
  height: 100px;
  background-color: blue;
}
.wrapper {
  position: relative;
  width: 400px;
  height: 400px;
  border: 3px solid red;
}
button {
  margin-bottom: 10px;
  margin-top: 10px;
  width: 100px;
  height: 40px;
  background-color: yellow;
  border: none;
}
```