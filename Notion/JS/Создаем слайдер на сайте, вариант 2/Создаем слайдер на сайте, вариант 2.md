![[Untitled 138.png|Untitled 138.png]]

Данный слайдер работает по типу карусели: когда все слайдеры размещены в ряд и мы их передвигаем по нужным параметрам.

В **HTML** мы кое-что меняем, все слайды, которые у нас есть мы помещаем еще в одну обертку:

```HTML
<div class="offer__slider-inner">
```

Давайте разберем алгоритм, по которому все будет работать.  
У нас есть главная обертка:  

```HTML
<div class="offer__slider-wrapper">
```

и соответсвенно ей мы назначим **свойство** **overflow = 'hidden'** - это значит, что все что не подходит под ширину этого блока будет скрыто и невидимо для обычного пользователя.

Соответсвенно следующий блок, который оборачивает все слайды **<div class="offer__slider-inner">** будет в виде карусели. Он займет столько места, сколько у нас слайдов в ширину. То есть допустим у нас 4 слайда и он будет занимать 400% от ширины нашего одного слайда, который есть на странице. И соответсвенно, когда мы будем нажимать на кнопки вперед и назад, мы будем не скрывать и показывать отдельные слайды, а мы их будем передвигать по отношению к **<div class="offer__slider-wrapper">**. Происходит это за счет **свойства transform**, который мы будем применять к **<div class="offer__slider-inner">**

  

Мы получаем нужные нам элементы со страницы с помощью **методов** **querySelector()** и **querySelectorAll()**.

А также нам понадобится **переменная**, с помощью которой мы получим ширину, которая была применена к блоку **<div class="offer__slider-wrapper">**

для того, чтобы подстраивать наши слайды под ширину  этого блока:

```JavaScript
width = window.getComputedStyle(slidesWrapper).width
```

Для этого мы используем **метод** **getComputedStyle(slidesWrapper)** и конкретно к **width**, почему не через **style**? а потому что у этого блока не существует **inline - стили**, но у него есть **примененные стили** **ComputedStyle**, которые мы можем получать при помощи **css**. Мы обращаемся к **window**, потому что работает он именно на окне.

  

**Переменная slidesField**  будет занимать большое кол-во пространства в одну строчку и внутри себя она будет как раз выстраивать слайды, поэтому сделаем 2 самые главные операции:

Установим ширину **переменной slidesField**:

(Мы умножаем кол-во слайдов на 100%)

```JavaScript
slidesField.style.width = 100 * slides.length + '%'
```

И каждому отдельному слайду установим ширину, перебрав все слайды (тк как слайды могут быть разные ширины), но прописав этот код мы теперь будем точно уверены, что каждый слайд будет одинаковой ширины и все они поместятся в **переменную slidesField**.

```JavaScript
slides.forEach(slide => {
    slide.style.width = width;
});
```

Далее добавляем еще **стилей** нашей **переменной** **slidesField**, мы добавляем **flex**, чтобы все слайды размещались в одну линию и также чтобы они плавно передвигались добавим **свойство transition**.

```JavaScript
slidesField.style.display = 'flex';
slidesField.style.transition = '0.5s all';
```

И чтобы у нас показывался только один слайд, мы возьмем **переменную slidesWrapper** и ограничим показ слайдов внутри него:

(то есть мы скрываем все элементы, которые не попадают в область видимости)

```JavaScript
slidesWrapper.style.overflow = 'hidden'
```

Для того чтобы четко понимать какой слайд показывается мы объявляем **переменную** **slideIndex**, а также нам понадобится какой-то отступ, чтобы мы могли четко знать, насколько мы отступили вправо и насколько мы отступили влево, для этого объявляем **переменную offset**

```JavaScript
let offset = 0;
let slideIndex = 1;
```

  

Далее назначаем **обработчик события** для того, чтобы передвигать слайдер вперед:

Внутри мы передвигаем при нажатии слайд за счет строчки: **slidesField.style.transform = `translateX(-${offset}px)`**, а в **translateX** мы прописываем в какую сторону будет сдвигаться(если влево, то используем минус, если вправо, то плюс) и подставляем **переменную offse**t, то есть насколько мы с вам будем сдвигаться и добавляем измерения **px**)

Также нам нужно сделать функционал, что когда мы доходим до последнего слайда  мы будем возвращаться на первый. Сделать это можно прописав вот такое **условия**:

**if (offset == (+width.slice(0, width.length - 2) * (slides.length - 1))) {**

**offset = 0;**

**} else {**

**offset += +width.slice(0, width.length - 2);**

**}**

Мы здесь говорим, если наш отступ **offset** будет равен ширине одного слайда умноженное на кол-во слайдов и минус один, то мы будем устанавливать **offset 0**. (Тут же чтобы **width** превратить в **числовой тип данных** мы ставим **унарный плюс** и используем **метод slice()**, который вырезает определенный кусочек **строки**, а делать мы это будем, начиная с нулевого индекса и исключая 2 последних символа: **(0, width.length - 2)**

Если это у нас не последний слайд, то мы будем добавлять смещение: **+width.slice(0, width.length - 2)** - дословно это значит, что когда мы нажимаем на стрелочку вперед, соответсвенно к offset добавляется ширина еще одного слайда.

```JavaScript
next.addEventListener('click', () => {
    if (offset == (+width.slice(0, width.length - 2) * (slides.length - 1))) {
        offset = 0;
    } else {
        offset += +width.slice(0, width.length - 2); 
    }

    slidesField.style.transform = `translateX(-${offset}px)`;

    if (slideIndex == slides.length) {
        slideIndex = 1;
    } else {
        slideIndex++;
    }

    if (slides.length < 10) {
        current.textContent =  `0${slideIndex}`;
    } else {
        current.textContent =  slideIndex;
    }
});
```

Теперь сделаем то же самое для кнопки **prev**:

А здесь же мы в **условии** должны проверять не последний слайд, а наоборот первый **offset == 0**, мы перемещаем слайдер в самый конец:

**offset = +width.slice(0, width.length - 2) * (slides.length - 1)**

Но а если это был не последний слайд, то здесь мы будем не прибавлять значение, а отнимать: **offset -= +width.slice(0, width.length - 2)**

```JavaScript
prev.addEventListener('click', () => {
    if (offset == 0) {
        offset = +width.slice(0, width.length - 2) * (slides.length - 1);
    } else {
        offset -= +width.slice(0, width.length - 2);
    }

    slidesField.style.transform = `translateX(-${offset}px)`;

    if (slideIndex == 1) {
        slideIndex = slides.length;
    } else {
        slideIndex--;
    }

    if (slides.length < 10) {
        current.textContent =  `0${slideIndex}`;
    } else {
        current.textContent =  slideIndex;
    }
});
```

И напоследок прописываем **условие** для нумерации слайдов:

```JavaScript
if (slides.length < 10) {
    total.textContent = `0${slides.length}`;
    current.textContent =  `0${slideIndex}`;
} else {
    total.textContent = slides.length;
    current.textContent =  slideIndex;
}
```

Все инициализация готова.

А теперь при нажатии либо на **prev**, либо на **next**, мы с вами должны контролировать **slideIndex** при помощи этих **условий**:

**next**

```JavaScript
if (slideIndex == slides.length) {
    slideIndex = 1;
} else {
    slideIndex++;
}

if (slides.length < 10) {
    current.textContent =  `0${slideIndex}`;
} else {
    current.textContent =  slideIndex;
}
```

**prev**

```JavaScript
if (slideIndex == 1) {
    slideIndex = slides.length;
} else {
    slideIndex--;
}

if (slides.length < 10) {
    current.textContent =  `0${slideIndex}`;
} else {
    current.textContent =  slideIndex;
}
```

  

```JavaScript
// Slider

    let offset = 0;
    let slideIndex = 1;

    const slides = document.querySelectorAll('.offer__slide'),
        prev = document.querySelector('.offer__slider-prev'),
        next = document.querySelector('.offer__slider-next'),
        total = document.querySelector('\#total'),
        current = document.querySelector('\#current'),
        slidesWrapper = document.querySelector('.offer__slider-wrapper'),
        width = window.getComputedStyle(slidesWrapper).width,
        slidesField = document.querySelector('.offer__slider-inner');

    if (slides.length < 10) {
        total.textContent = `0${slides.length}`;
        current.textContent =  `0${slideIndex}`;
    } else {
        total.textContent = slides.length;
        current.textContent =  slideIndex;
    }
    
    slidesField.style.width = 100 * slides.length + '%';
    slidesField.style.display = 'flex';
    slidesField.style.transition = '0.5s all';

    slidesWrapper.style.overflow = 'hidden';

    slides.forEach(slide => {
        slide.style.width = width;
    });

    next.addEventListener('click', () => {
        if (offset == (+width.slice(0, width.length - 2) * (slides.length - 1))) {
            offset = 0;
        } else {
            offset += +width.slice(0, width.length - 2); 
        }

        slidesField.style.transform = `translateX(-${offset}px)`;

        if (slideIndex == slides.length) {
            slideIndex = 1;
        } else {
            slideIndex++;
        }

        if (slides.length < 10) {
            current.textContent =  `0${slideIndex}`;
        } else {
            current.textContent =  slideIndex;
        }
    });

    prev.addEventListener('click', () => {
        if (offset == 0) {
            offset = +width.slice(0, width.length - 2) * (slides.length - 1);
        } else {
            offset -= +width.slice(0, width.length - 2);
        }

        slidesField.style.transform = `translateX(-${offset}px)`;

        if (slideIndex == 1) {
            slideIndex = slides.length;
        } else {
            slideIndex--;
        }

        if (slides.length < 10) {
            current.textContent =  `0${slideIndex}`;
        } else {
            current.textContent =  slideIndex;
        }
    });
});
```

```HTML
<div class="offer__slider">
    <div class="offer__slider-counter">
        <div class="offer__slider-prev">
            <img src="icons/left.svg" alt="prev">
        </div>
        <span id="current">03</span>
        /
        <span id="total">04</span>
        <div class="offer__slider-next">
            <img src="icons/right.svg" alt="next">
        </div>
    </div>
    <div class="offer__slider-wrapper">
        <div class="offer__slide">
            <img src="img/slider/pepper.jpg" alt="pepper">
        </div>
        <div class="offer__slide">
            <img src="img/slider/food-12.jpg" alt="food">
        </div>
        <div class="offer__slide">
            <img src="img/slider/olive-oil.jpg" alt="oil">
        </div>
        <div class="offer__slide">
            <img src="img/slider/paprika.jpg" alt="paprika">
        </div>
    </div>
</div>
```