[http://largescalejs.ru/commonjs-modules/](http://largescalejs.ru/commonjs-modules/) - про **модули CommonJS**

[https://webpack.js.org/guides/getting-started/](https://webpack.js.org/guides/getting-started/) - установка **Webpack**

[https://webpack.js.org/](https://webpack.js.org/) - главная с визуальной инструкцией

[https://webpack.js.org/configuration/mode/](https://webpack.js.org/configuration/mode/) - режимы работы **Webpack**

[https://webpack.js.org/configuration/devtool/](https://webpack.js.org/configuration/devtool/) - виды **devtool**

[https://webpack.js.org/concepts/modules/](https://webpack.js.org/concepts/modules/) - **модули Webpack**

[webpack.config.js](https://drive.google.com/file/d/1YWy-nO7V3LrAu-5xPoiZ_6Csjz01C7CE/view)

Когда мы хотим собрать все в один **скрипт** в правильном порядке, мы можем использовать несколько подходов:

- самые популярные - это **система модулей CommonJS**
- и **система импотров и экспортов**, которые появились в стандарте **ES6**

Как раз эти системы нужны для того, чтобы не создавать вручную **анонимную самовызывающуюся функцию**, они это делают за нас.

В этой теме мы разберем **CommonJS**

Посмотрим как это работает. В файле **main.js** мы создаем **функцию** **myModuel()** и в этом же файле говорим: возьми эту **функцию** и экспортируй ее, то есть позволь где-то ее импортировать. Если мы рассматриваем синтаксис **CommonJS**, то прописываем **module.exports = myModule**

В файле **index.js** мы создаем **переменную** **myModule** и в ней импортируем, помещаем путь к файлу **main.js**. И мы не ставим **.js**, потому что **сборщик** сам поймет, что за файл ему необходимо использовать.

Наш браузер абсолютно не умеет собирать **модули** самостоятельно, ему все равно вообще на наши экспорты, импорты. Он выдаст нам ошибку о том, что он не знает функцию **require()**. Любая **модульная система** должна быть собрана в одни результирующий файл.

И для сборки **модулей** нам понадобится какой-то **сборщик** и здесь на сцену выходит **webpack**. Эта **утилита** не зря такая популярная, она умеет собирать не только **скрипты**, но и полностью конфигурировать на проект: обрабатывать **стили**, картинки, формировать папки и многое другое.

Есть один нюанс - это разница между **Gulp** и **webpack**. **Gulp** - это **планировщик задач**, при помощи него мы можем создавать различные **task**, которые выполняются в различных обстоятельствах. **Gulp** не умеет собирать **скрипты**, обрабатывать изображения и т д. Он лишь подключает в себя какие-то **модули** и запускает определенные задачи, когда мы от него это требуем. **Webpack** это как раз **сборщик модулей**, мы его настраиваем и запускаем для того, чтобы он собирал проект. Они спокойно могут комбинироваться вместе.

![[Untitled 144.png|Untitled 144.png]]

![[Untitled 1 71.png|Untitled 1 71.png]]

![[Untitled 2 52.png|Untitled 2 52.png]]

Команды для того, чтобы **webpack** установить себе в **npm** проект.

А чтобы запустить **webpack** нужно в терминал набрать команду **npx webpack**

```JavaScript
mkdir webpack-demo
cd webpack-demo
npm init -y
npm install webpack webpack-cli --save-dev
```

У **webpack** есть 2 режима работы:

- первый - это использование стандартных заводских настроек, то есть то что в нем задано изначально.
- второй - это когда мы сами прописываем какой-то конфигурационный файл и уже по нашим правилам **webpack** будет работать.

Когда мы запускаем со стандартными настройками - это значит, что мы должны четко подстраиваться под эти стандартные настройки **webpack**. И в документации мы видим, что наш главный файл, который принимает в себе все импорты, должен строго называться всегда **index.js** и лежать в папке **src**.

![[Untitled 3 38.png|Untitled 3 38.png]]

Теперь разберем **webpack config**:

- **mode** - это **режим**, в котором будет работать наш **webpack**. **Режима** у нас всего 2: **development** и **production**.

По умолчанию, когда мы не используем **config** стоит **production**, это **режим создания продукта**, он работает медленнее, но включает в себя встроенные инструменты по оптимизации кода, это такой режим для конечной сборки продукта.

Если стоит **режим development**, то есть разработки, то наш код будет работать быстрее, сборка будет происходить быстрее, но **webpack** будет не так сильно оптимизировать наш код, мы видим, что **плагинов** намного меньше. Исходя из названия такой **режим** нам нужен для **разработки**, то есть для процесса работы. И вот когда мы полностью закончим продукт, мы ставим в **production** и уже прогоняем через такой **режим**, чтобы все было чисто, оптимизировано и быстро.

![[Untitled 4 28.png|Untitled 4 28.png]]

- **entry** - тот файл с чего мы будем начинать
- **output** - это файл выходов, мы задаем его только в виде **объекта**, здесь мы конфигурируем тот файл, который получится в итоге. Первая строчка - это то как он будет называться , а вторая это то куда мы будем его складывать.
- **watch** - этот параметр указан в позиции **true**, если он стоит в правдивой позиции, то **webpack** после того, как был вызван, будет отслеживать изменение наших файлов и в автоматическом режиме собирать проект каждый раз, когда мы сохраняем такие измененные файлы.
- **devtool** - что такое **source-map** - эта технология хранит информацию об исходном коде и местоположения кода.
- **module** - это **модули** и их настройка, мы можем установить **babel** как **модуль** **webpack**

![[Untitled 5 22.png|Untitled 5 22.png]]

На данной картинке показано, где находится **source-map** и что он дает посмотреть исходный код и расположение папок и файлов.

![[Untitled 6 21.png|Untitled 6 21.png]]

Далее показана как мы в нашем проекте **food_dist** разбиваем **скрипт** на **модули**. И также не забываем **html** уже прописать **js/bundle.js**

script.js

```JavaScript
window.addEventListener('DOMContentLoaded', function() {
    const tabs = require('./modules/tabs'),
          modal = require('./modules/modal'),
          timer = require('./modules/timer'),
          cards = require('./modules/cards'),
          calc = require('./modules/calc'),
          forms = require('./modules/forms'),
          slider = require('./modules/slider');

    tabs();
    modal();
    timer();
    cards();
    calc();
    forms();
    slider();
});
```

![[Untitled 7 19.png|Untitled 7 19.png]]

![[Untitled 8 16.png|Untitled 8 16.png]]

И кстати так как терминал у нас будет занят **webpack**, а к нас есть еще **json-server**, то мы просто открываем новый терминал и запускаем его уже там.