[https://github.com/typicode/json-server](https://github.com/typicode/json-server) - **json-server**

  

В самом начале курса, мы с вами установили окружение, которое называется **Node.js**. Оно позволяет нам работать не только с **backend**, написанным на **Node.js**, но и использовать **пакетный менеджер**, который называется **npm**.

Если говорить по простому, то **npm пакеты** - это кусочки какого-то кода, которые лежат на отдельных **серверах** и которые мы можем устанавливать к себе в проект для того, чтобы использовать.

Те кто хорошо знакомы с **версткой** знают такие **npm пакеты**, как **gulp**, **browser-sync** и прочее. Это отдельные функциональности, которые мы можем брать из **npm** и класть к себе в проект, для того чтобы они работали на благо нашего проекта. Обычно в реальном проекте у нас будет довольно много зависимостей - это различные **компиляторы css**, **task-runner** или те же **сборщики проектов**. Но самое главное то, что все это **npm пакеты**, которые мы должны установить в наш проект.

И прежде чем это сделать, мы должны сказать нашей системе(в терминале), что сейчас наш проект в редакторе кода будет содержать **npm пакеты**, то есть он превращается в **npm проект**. Сделать это нужно, чтобы наша система четко знала: что в этом проекте есть, какие пакеты он использует, какая версия, кто автор и прочую полезная информация. Поэтому всегда перед тем, как устанавливать какие-то дополнительные зависимости (то есть **npm** **пакеты** в наш проект), необходимо создать наш **npm проект**.

  

Чтобы за инициализировать наш **npm проект** нам необходимо в терминале прописать **npm init** .

```Plain
nikitaelin@Air-Nikita react % npm init
```

После этого у нас идет ряд вопрос, на которые нам необходимо дать ответы:

- **package name:** - название нашего проекта
- **version: (1.0.0)** - версия
- **description** - описание нашего проекта
- **entry point: (index.js)** - главный наш файл
- **test command**: - команда для тестов
- **git repository:** - гит репозиторий, то есть можем указать сразу url для нашего репозитория
- **keywords:** различные ключевые слова, по которым мы описываем наш проект
- **author:** - автор
- **license: (ISC)** лицензия

Мы нажимаем ок и мы видим те настройки, которые будут применены к нашему проекту.

И самое главное, что теперь в нашем проекте появился файл **package.json**, мы его открываем и как раз, что те данные из нашей консоли переместились в этот файл. Да,  **json** - это все тот же **формат данных**, которые мы использовали для передачи на **сервер**, как видите он также используется для хранения каких то настроек вот в таком удобном, читабельном формате:

```JSON
{
  "name": "food_dist",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "author": "",
  "license": "ISC",
  "devDependencies": {
    "json-server": "^0.16.3"
  }
}
```

И самое главное, что наш файл **package.json** будет содержать в себе всю информацию о нашем проекте, и кроме того будет содержать информацию о тех пакетах, которые мы поместим внутри проекта.

![[Untitled 134.png|Untitled 134.png]]

![[Untitled 1 66.png|Untitled 1 66.png]]

Следующая задача это установка любого **npm пакета**, который мы будем с вами использовать внутри нашего проекта, их будет несколько, мы в течении курс будем их еще устанавливать, но пока установим самый первый, который нам понадобится - это **json-server**.

Для этого мы в терминале прописываем: **npm i json-server --save-dev**

После названия нашего пакета идут дополнительные параметры. Дело в том, что пакеты могут различаться на 2 большие категории, мы их можем устанавливать **локально**, а можем устанавливать **глобально**. Если мы пакет установим **глобально**, то он будет работать в любой части нашей системы. Но чаще всего мы будем устанавливать **локально** пакет. Если мы хотим установить пакет **глобально**, то мы прописываем **sudo** **npm i json-server -g** (**sudo** прописывается на mac os). Если локально, то дополнительно ничего не прописываем.

Следующим этапом нам необходимо указать **флаг**, который означает, как этот **пакет** влияет на наш **проект**. То есть используется ли он только при **разработки**, либо используется при работе нашего проекта. И делается это двумя разными командами. Наш **json-server** будет работать только при разработке, эта такая тестовая **фича**, которая позволит нам, как и **JsonPlaceholder** обращаться с фейковым **backend -ом** и тестировать весь наш функционал. Поэтому мы прописываем ключ, который называется **--save-dev** - это так называемая зависимость при **разработке**. Но бывает и обратная ситуация, когда вещи, **библиотеки**, какие-то **пакеты**, которые мы включаем во внутрь нашего проекта используются не для **разработки**, а для работы проекта внутри. Классический пример: это **библиотеки Jquery**, **React** и другие (то есть те, кто составляют костяк нашего приложения или вебсайта)

И вот для того, чтобы сказать четко, что такие зависимости используются внутри проекта, мы прописываем просто **--save**

Так мы разграничиваем 2 типа пакетов.

  

Установив **npm** **пакет** **json-server**, мы обращаем внимание на 2 вещи:

- во-первых в **package.json** появилась зависимость **devDependencies**, то есть **json-server**, который используется в такой версии 0.16.3 и только для **разработки**(если мы установим с флагом просто **save**, то у нас зависимость **devDependencies** будет без приставки **dev**:

```JSON
"devDependencies": {
    "json-server": "^0.16.3"
  }
```

- и второе изменение - это то что в нашем проекте появилась папка **node_modules** и файл **package-lock.json**

Папка **node_modules** - это непосредственно все те **npm пакеты**, которые мы установили в наш проект. Папку **node_modules** мы никогда не трогаем и не изменяем. Это **npm пакеты**, которые работают непосредственно с **Node.js**. Именно с папки **node_modules** мы будем брать библиотеки, которые мы установили в наш проект. Кроме всего папка **node_modules** занимает довольно таки много места (200, 300, 400 или 500 МБ).

И здесь мы сталкиваемся с одной проблемой: наш проект может весить максимум несколько Мб со всем оптимизированными уже картинками и при этом у нас есть огромная папка, которая весит 500Мб. Что же с ней делать? Когда мы например начинаем пушить наш проект на **github** или **gitlab** репозиторий, то нам всегда нужно иметь в проекте файл **.gitignore**. В этой файле прописаны все те папки файлы, которые мы не должны пушить, в том числе эта папка **node_modules**. Вручную папку **node_modules** мы никогда не удаляем, для этого есть специальная команда.

Но самое главное, что мы папку **node_modules** можем установить только одной командой, имея при этом только файл **package.json**. Такая ситуация: мы разрабатываем проект, **запушили** этот **репозиторий** на **github**, все хорошо. Там какой-то уже другой пользователь видит этот проект, видит, что там есть **package.json**, но нет **node_modules**. Он скачивает этот проект, устанавливает на компьютер и понимает, что ему нужны все те **npm** **пакеты**, которые были установлены у нас, как у автора. И все что ему нужно сделать - это прописать команду **npm i**, которая возьмет все зависимости, все пакеты, которые написаны в **package.json** и установит их автоматически, именно поэтому мы папку **node_modules** не **пушим**, она установится сама с помощью команды.

Также у нас появился файл **package-lock.json**, если мы его раскроем, то увидим, что там довольно большой **json** файл, в котором прописаны тоже различные пакеты, зависимости, пути к ним. Этот файл мы тоже не трогаем, по факту тут просто записаны мини зависимости больших пакетов, которые мы устанавливали в **package.json**

![[Untitled 2 50.png|Untitled 2 50.png]]

Теперь разберем **npm пакет json-server** - это простой **сервер** по работе с **json файлами**, когда мы их можем использовать, как маленькую **базу данных**, причем здесь будут работать многие **методы**, в том числе и **post**.

В наш проект мы поместили небольшую **базу данных**, которая содержит все то, что мы использовали для построения карточек товара. Ну кроме того у нас есть поле **requests**, в которе мы будем записывать непосредственно обращение пользователя(когда он отправляет **форму** с сайта), все эти заявки будут помещаться сюда и будут как-то отображаться.

![[Untitled 3 36.png|Untitled 3 36.png]]

И давайте попробуем получить доступ к этой небольшой **базе данных**.

Пропишем код, в котором скажем, что возьмем ответ от **сервера** **data** и превратим его в обычный **js** **объект**:

```JavaScript
.then(data => data.json())
```

И возьмем тот результат, который получится и выведем его в консоль:

```JavaScript
.then(res => console.log(res))
```

Вводим **форму** на сайте и в консоле получаем данные (картинка справа)

И зачем же мы установили **json-server**? А дальше нам понадобится **объект requests** куда мы уже будем **постить** данные, а для этого нам уже необходимо поддерживать **post запросы** и чтобы их правильно организовать в **json файле**, нам и понадобится **json server**.

Давайте посмотрим как запустить наш json-server. В терминале прописываем **json-server db.json**. Мы видим в консоле приветственное сообщение, что оно у нас загрузилось и мы видим несколько **endpoint** (путей куда мы можем делать **запросы**) **menu** и **requests**:

**Resources**

[**http://localhost:3000/menu**](http://localhost:3000/menu)

[**http://localhost:3000/requests**](http://localhost:3000/requests)

И вот теперь, чтобы правильно работать с этим **сервером** нам необходимо скопировать этот адрес [**http://localhost:3000/menu**](http://localhost:3000/menu)и вместо названия **файла db.json** подставить его. Сохраним такую структуру, заходим на страничку, обновляем и получаем не **объект**, а **массив**, потому что тогда мы ссылались на полный **json файл**, а сейчас мы обратились непосредственно к **menu**.

```JavaScript
fetch('db.json')
    .then(data => data.json())
    .then(res => console.log(res));
```

![[Untitled 4 26.png|Untitled 4 26.png]]

![[Untitled 5 20.png|Untitled 5 20.png]]

![[Untitled 6 19.png|Untitled 6 19.png]]